# 📋 开发任务清单

> 本文档是项目的需求和任务管理中心
> 提交此文件的修改会自动触发 Codex 开发流程

---

## 🎯 当前开发任务

### 任务 1: [任务标题]

**优先级**: 🔴 高 / 🟡 中 / 🟢 低

**状态**:

- [ ] 待开发
- [ ] 开发中
- [ ] 待审查
- [ ] 已完成

**需求描述**:

<!-- 详细描述功能需求，越详细越好 -->

**技术要求**:

- 前端：React + TypeScript
- 后端：NestJS + TypeScript
- 数据库：（如需要）

**验收标准**:

- [ ] 标准 1
- [ ] 标准 2
- [ ] 标准 3

**设计稿/参考**:

<!-- 粘贴设计稿链接或参考资料 -->

---

### 任务 2: [任务标题]

**优先级**: 🔴 高 / 🟡 中 / 🟢 低

**状态**:

- [ ] 待开发
- [ ] 开发中
- [ ] 待审查
- [ ] 已完成

**需求描述**:

**技术要求**:

**验收标准**:

- [ ] 标准 1
- [ ] 标准 2

---

## ✅ 已完成任务

### ~~任务 X: 已完成的任务标题~~

**完成时间**: 2024-01-01

**PR**: #123

**说明**:

<!-- 任务完成说明 -->

---

## 📝 任务模板

复制以下模板添加新任务：

````markdown
### 任务 N: [任务标题]

**优先级**: 🔴 高 / 🟡 中 / 🟢 低

**状态**:

- [x] 待开发
- [ ] 开发中
- [ ] 待审查
- [ ] 已完成

**需求描述**:

<!--
描述要实现的功能，包括：
1. 用户故事：作为...我希望...以便...
2. 核心功能点
3. 边界条件
4. 特殊要求
-->

**前端需求**（如适用）:

- [ ] 页面/组件：xxx
- [ ] UI 交互：xxx
- [ ] 数据展示：xxx
- [ ] 表单验证：xxx

**后端需求**（如适用）:

- [ ] API 接口：POST/GET/PATCH/DELETE /api/xxx
- [ ] 数据库：表设计/迁移
- [ ] 业务逻辑：xxx
- [ ] 权限控制：xxx

**技术要求**:

- 前端：React + TypeScript
- 后端：NestJS + TypeScript
- 数据库：MySQL / PostgreSQL / MongoDB
- 其他：xxx

**API 接口设计**（如适用）:

```typescript
// 请求
POST /api/xxx
{
  "field1": "value1",
  "field2": "value2"
}

// 响应
{
  "success": true,
  "data": { ... }
}
```
````

**验收标准**:

- [ ] 功能完整实现
- [ ] UI 与设计稿一致
- [ ] 所有测试通过（覆盖率 > 80%）
- [ ] 代码审查通过
- [ ] 性能符合要求
- [ ] 无安全漏洞

**设计稿/参考**:

<!--
粘贴链接或截图：
- Figma 设计稿
- 参考页面
- 技术文档
-->

**预计工作量**: X 天

**开始时间**: YYYY-MM-DD

**目标完成时间**: YYYY-MM-DD

**备注**:

<!-- 其他需要说明的内容 -->

````

---

## 🔄 工作流程说明

### 1. 添加新任务
1. 复制任务模板
2. 填写任务详情（越详细越好）
3. 提交 `todo.md` 到 Git
4. Push 到 GitHub

### 2. Codex 自动开发
- Codex 检测到 `todo.md` 变化
- 自动分析任务需求
- 生成开发计划
- 开始编码实现
- 编写测试用例
- 提交 PR

### 3. Claude 自动审查
- 检测到新 PR
- Claude 自动进行代码审查
- 检查：代码质量、安全性、性能
- 决策：通过 / 打回修改

### 4. 自动合并或修复
- **通过**：自动合并到主分支
- **不通过**：Codex 根据反馈修改，重新提交

---

## 📊 任务统计

- 总任务数：0
- 待开发：0
- 开发中：0
- 待审查：0
- 已完成：0

---

## 💡 编写技巧

### ✅ 好的任务描述
```markdown
### 任务 1: 实现用户登录功能

**需求描述**:
作为用户，我希望能够使用邮箱和密码登录系统，以便访问个人信息。

核心功能：
1. 用户输入邮箱和密码
2. 前端验证格式（邮箱格式、密码长度）
3. 调用后端登录 API
4. 登录成功后保存 token 并跳转到首页
5. 登录失败显示错误提示

**API 接口设计**:
POST /api/auth/login
请求：{ "email": "user@example.com", "password": "123456" }
响应：{ "success": true, "data": { "token": "xxx", "user": {...} } }

**前端需求**:
- 创建 Login.tsx 页面
- 表单验证：必填、邮箱格式、密码长度 >= 6
- 加载状态和错误提示
- 登录成功后跳转

**后端需求**:
- auth.controller.ts: POST /api/auth/login
- auth.service.ts: 验证用户密码，生成 JWT
- DTO 验证
- 错误处理

**验收标准**:
- [ ] 能够正确登录
- [ ] 密码错误显示提示
- [ ] 测试覆盖率 > 80%
````

### ❌ 不好的任务描述

```markdown
### 任务 1: 做登录

**需求描述**: 做一个登录功能
```

---

## 🚀 快速开始

### 第一次使用

1. 阅读本文档的工作流程说明
2. 复制任务模板
3. 填写你的第一个任务
4. 提交并 push

### 示例任务

参考下方的示例任务来编写你的任务。

---

## 📌 示例任务

### 示例：用户注册功能

**优先级**: 🔴 高

**状态**:

- [x] 待开发
- [ ] 开发中
- [ ] 待审查
- [ ] 已完成

**需求描述**:
作为新用户，我希望能够注册账号，以便使用系统功能。

核心功能：

1. 用户填写注册表单（用户名、邮箱、密码、确认密码）
2. 前端验证：
   - 用户名：2-20 个字符
   - 邮箱：有效的邮箱格式
   - 密码：至少 8 位，包含字母和数字
   - 确认密码：与密码一致
3. 提交注册请求
4. 注册成功后自动登录并跳转
5. 注册失败显示错误（如邮箱已存在）

**前端需求**:

- [ ] 创建 Register.tsx 页面组件
- [ ] 实现注册表单（用户名、邮箱、密码、确认密码）
- [ ] 表单验证（实时验证 + 提交验证）
- [ ] 调用注册 API
- [ ] 错误处理和加载状态
- [ ] 注册成功后跳转到首页

**后端需求**:

- [ ] 创建 users 模块
- [ ] 实现 POST /api/users/register 接口
- [ ] DTO 验证（CreateUserDto）
- [ ] 检查邮箱是否已存在
- [ ] 密码加密（bcrypt）
- [ ] 创建用户记录
- [ ] 返回用户信息和 token

**技术要求**:

- 前端：React + TypeScript + React Hook Form
- 后端：NestJS + TypeScript + class-validator
- 数据库：添加 users 表
- 密码加密：bcrypt
- 认证：JWT

**API 接口设计**:

```typescript
// 请求
POST /api/users/register
Content-Type: application/json

{
  "username": "johndoe",
  "email": "john@example.com",
  "password": "Password123"
}

// 成功响应 - 201 Created
{
  "success": true,
  "data": {
    "user": {
      "id": 1,
      "username": "johndoe",
      "email": "john@example.com",
      "createdAt": "2024-01-01T00:00:00.000Z"
    },
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  },
  "message": "注册成功"
}

// 失败响应 - 400 Bad Request
{
  "success": false,
  "error": {
    "code": "EMAIL_EXISTS",
    "message": "该邮箱已被注册"
  }
}
```

**数据库设计**:

```sql
CREATE TABLE users (
  id INT PRIMARY KEY AUTO_INCREMENT,
  username VARCHAR(50) UNIQUE NOT NULL,
  email VARCHAR(255) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

**验收标准**:

- [ ] 能够成功注册新用户
- [ ] 重复邮箱注册会提示错误
- [ ] 密码正确加密存储
- [ ] 表单验证完善
- [ ] 单元测试覆盖率 > 80%
- [ ] E2E 测试通过
- [ ] 无安全漏洞（SQL 注入、XSS 等）

**设计稿/参考**:

<!-- 如有设计稿，粘贴链接 -->

**预计工作量**: 2 天

**开始时间**: 2024-01-10

**目标完成时间**: 2024-01-12

**备注**:

- 注册成功后自动登录
- 后续可以添加邮箱验证功能

---

# <!--

在此上方添加你的新任务
在此下方是已完成的任务归档
===========================================
-->

### 任务 3: 首页轮播图开发

**优先级**: 🔴 高

**状态**:

- [ ] 待开发
- [ ] 开发中
- [ ] 待审查
- [ ] 已完成

**需求描述**:
新建一个 Home 页面，并实现一个功能丰富、设计美观的轮播图（Carousel）。

参考样式库：https://reactbits.dev

**前端需求**:

- [ ] 创建 `HomePage` 组件
- [ ] 实现轮播图组件，支持自动播放、手势滑动等交互
- [ ] 使用流畅的动画效果（可参考 Framer Motion）
- [ ] 确保响应式适配桌面和移动端

**验收标准**:

- [ ] 页面加载流畅
- [ ] 轮播图交互无卡顿
- [ ] UI 效果对标参考库
 
